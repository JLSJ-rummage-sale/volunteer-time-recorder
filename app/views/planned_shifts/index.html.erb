<% @page_title = "Planned Shifts" %>

<h2>Planned Shifts</h2>

<h4>
    <% if(@parent_event) %>
        Planned Shifts for Event: <%= link_to event_title(@parent_event), event_path(@parent_event) %>
    <% elsif(@parent_volunteer) %>
        Planned Shifts for Volunteer: <%= link_to (full_name(@parent_volunteer)), volunteer_path(@parent_volunteer) %>
    <% else %>
        All Planned Shifts
    <% end %>
</h4>

<p>
    <% if(@parent_event) %>
        <%= link_to "Add Planned Shift", new_planned_shift_path(@planned_shift, :event_id => @parent_event.id), :class => 'btn btn-success' %>
    <% elsif(@parent_volunteer) %>
        <%= link_to "Add Planned Shift", new_planned_shift_path(@planned_shift, :volunteer_id => @parent_volunteer.id), :class => 'btn btn-success' %>
    <% else %>
        <%= link_to "Add Planned Shift", new_planned_shift_path(@planned_shift), :class => 'btn btn-success' %>
    <% end %>
</p>


<div class="table-responsive">
    <table class="table table-striped table-bordered table-hover table-sm">
        <thead class="thead-dark">
            <tr>
            <th scope="col">Name</th>
            <th scope="col">Event</th>
            <th scope="col">Volunteer</th>
            <th scope="col">Hours</th>
            <th scope="col">Day</th>
            <th scope="col">Start Time</th>
            <th scope="col">End Time</th>
            <th scope="col">More Info</th>
            </tr>
        </thead>
        <tbody>
            <% @planned_shifts.each do |planned_shift| %>
                <tr>
                    <td><%= link_to planned_shift.name, planned_shift_path(planned_shift) %></td>
                    <td><%= link_to planned_shift.event.event_title, planned_shift_path(planned_shift) %></td>
                    <td><%= link_to planned_shift.volunteer.full_name, planned_shift_path(planned_shift) %></td>
                    <td><%= link_to number_with_precision(planned_shift.total_hours, precision: 2,  strip_insignificant_zeros: true) + " hours", planned_shift_path(planned_shift) %></td>
                    <td><%= link_to planned_shift.start_time.strftime("%a, %b %d"), planned_shift_path(planned_shift) %></td>
                    <td><%= link_to planned_shift.start_time.strftime("%I:%M %p"), planned_shift_path(planned_shift) %></td>
                    <td><%= link_to planned_shift.end_time.strftime("%I:%M %p"), planned_shift_path(planned_shift) %></td>
                    <td><%= link_to "Details", planned_shift_path(planned_shift), :class => 'btn btn-secondary' %></td>
                </tr>
            <% end %>
        </tbody>
    </table>
</div>

<% if @planned_shifts.blank? %>
  <h4>
    <% if(@parent_event) %>
        No Planned Shifts for Event: <%= event_title(@parent_event) %>
    <% elsif(@parent_volunteer) %>
        No Planned Shifts for Volunteer: <%= full_name(@parent_volunteer) %>
    <% else %>
        There are no Planned Shifts yet.
    <% end %>
  </h4>
<% end %>
